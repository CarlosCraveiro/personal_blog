---
title: "Einstein-Boltzmann board"
date: 2024-09-10T11:15:14-03:00
draft: true
categories: [""]
tags: ["open hardware", "physics experiments", "personal projects"]
---

{{< katex >}}

After a big hiatus after my first post, finally some content to this empty
blog. As the second post in this blog, I'll talk about a project that
I was working on since January, the **Einstein-Boltzmann Board**!

## What is the board

This is a board to replicate the experiment of the [5-th Experimental
Physics Olympiad (2017)](https://arxiv.org/abs/1801.00022). Which the
original purpose is to determine the Boltzmann by evaluating the mean of
the thermal energy of a electrical system.

Also, important to inform that all the scripts used to analyze the data
and also the data are provided at the [Project's Github repository](https://github.com/CarlosCraveiro/einstein-boltzmann/tree/main).

![board_3d_kicad](main_board.png)

All the project is Open Hardware licensed under [CERN Open Hardware
Licence Version 2 - Strongly Reciprocal](https://cern-ohl.web.cern.ch/home). I made the layout using [KiCad
EDA](https://www.kicad.org/) and manufactured the project at
[JLCPCB](https://jlcpcb.com/), needles to say that this project was not
sponsored by them in any way.

## What it does?

The idea is to basically determine the Boltzmann constant (\\(k_b\\)) by
averaging the thermal noise generated by a RC circuit (Resistor in
parallel with a Capacitance), the noisy source is the resistor and the
noise that we are talking about is known as [Johnson–Nyquist
noise](https://en.wikipedia.org/wiki/Johnson%E2%80%93Nyquist_noise).

As we are working with white noise, a random or stochastic process with
zero mean, we need to work with it's Power Spectral Density, or just
[PSD](https://www.geeksforgeeks.org/power-spectral-density/), with that in
mind, its known that Johnson–Nyquist noise has a nearly a constant PSD:

$$S_{res}(f) = 4k_B T R$$

Observation that in some places you will find it as 2kBTR or 4kBTR, but
this is just a matter of if when you integrate you will integrate from
-infinity to +infinity (2kBTR, which I'll be using because the Book that
I used as reference Modern Digital and Analog Communication (The Oxford
Series in Electrical and Computer Engineering) by B.P.Lahthi and Zhi Ding
does in that way) or from 0 to +infinity (4kBTR, because noise is an even
function). With that in mind you can say that your noisy resistor could be
split in a noiseless resistor R and a noise source Vg (diagram 1), in that
way, connecting the capacitor you get the system at diagram 2, which in
fact is a [low pass filter
(LPF)](https://en.wikipedia.org/wiki/Low-pass_filter), a widely known
circuit among the electrical and electronics engineers, but for those who
are not familiar with it, just known that this behaves as an LTI (Linear
and Time Invariant) System with [Transfer
Function](https://en.wikipedia.org/wiki/Transfer_function) (maybe here
another magic word from the electronic field, but it is just
a mathematical relation that models the system's output for each possible
input - it mathematically describes the behaviour of LTI systems) of

$$ H(j\omega) = \frac{1}{1 + j \omega R C}, $$

where \\( \omega = 2 \pi f \\), so

$$ H(f) = \frac{1}{1 + j 2 \pi f R C}.$$



```
           +--o a                +------+-o a         
           |                     |      |      ^    
           |                     |      |      |      
          .+.                   .+.     |           
        R | |                 R | |     |      |    
          '+'                   '+'    _|_          
           |                     |     ---  C  |  Vo 
        + ,+.                 + ,+.     |            
      Vg (   )              Vg (   )    |      |     
        - `+'                 - `+'     |            
           |                     |      |      |      
           |                     |      |      v
           +--o b                +------+-o b
           
         (Diagram 01)            (Diagram 02)
```

In this, case we also know the relation between Input and Output PSD of
LTI a System, our LPF, which is given by:

$$ S_{out}(f) = |H(f)|^2 * S_{in}(f)$$

Important to notice that this asterisk \\( * \\) **is not
a multiplication**! This is a [convolution operation](https://en.wikipedia.org/wiki/Convolution).

TODO: Missing rest of the derivation!!!

Briefly explaining what it does, basically you have like an amplifier
stage done by an instrumental amplifier that increases the noise (that in
this case is our signal) by a million times and them square the signal and
them take the average. More information you can find in the original
article and I'll try to write a Wiki for the project at GitHub with
a "complete tour" of the board with the simulation of each stage. But this
is part of future work.

![board_turned_on](feature_board_turned_on.jpg)

## But can it actually measure Boltzmann?

To answer this question i need to talk about the experiments I did...

## The experiments

I performed the experiments at LA-SEL ( *Laboratório Aberto da SEL* ), the
Electronic Department ( **SEL** ) Open Laboratory, a 24h lab open to any
student who wants to develop academic and personal projects. 

Basically I followed the experiment procedure proposed for the **5-th
EPO**

### Analog Squaring

First I made the characterized the Analog Multiplier ( **ADA633** ) using
an external voltage source. I used a BK-PRECISION 1550 that was on easy
access at the lab.

![voltage source - BK-PRECISION 1550](small_voltage_source.jpg)

I took the measurements by sweeping the voltage source from 0.6 to 1.5
Volts waiting 1 minute for each measurement (waiting for the famous steady
state regime), and then I repeated the procedure inverting the polarity of
the source. The setup can be seen on the image bellow:

![analog_squaring_experimental_setup](analog_squaring_setup.jpg)

Important to point that all the measurements taken during the whole
experiment were made using ET-2402 TRUE RMS MULTIMETERS. I think that the
exact type of the multimeter is not important at all, but I'm pointing out
just for sake of reproducibility.

So, after taking the measurements, again following the procedure proposed,
I got these results:


![U2 vs U1]()

![U2 vs U1^2]()

Where the last plot is the linearised version of the first one, which the
linear regression gives the "gain factor" determined by the circuit
topology, in which was:

TODO FOUND THE VALUE!

### Voltage Fluctoscopy

Proceeding to the actual Boltzmann constant determination, first
I determined the actual values for the capacitances I bought using
a LCR-Meter available at the lab, which gave me very good accuracy for the
capacitances.

Probably a fair question that you may be asking yourself: "- Is this
device expensive?", and my honest answer is: "- I have no idea, but
**probably yes**".

![LCR](lcr.jpg)

The procedure was basically to probe each of the 29 capacitors with the
equipment showed bellow and wait for about two minutes to take each
measurement.

![LCR_measuring_capacitance](measuring_capacitance.jpg)

After organizing the capacitances in two sheets of paper to know which
capacitance were each, I set up a very simple Bluetooth thermometer using
a temperature sensor (DHT11) and a microcontroller ESP-32 that informed to
me the room temperature on my smartphone by using an app called Bluetooth
Serial. The code was very simple, but I left it in a [gist]() **TODO
CREATE THE GIST!** on GitHub for those who want to take a look.

![measuring_temperature](digital_termometer.jpg)

With all of that, the procedure was to connect the capacitor to its holder
on the board and take the multimeter measurement after waiting for about
2 minutes to the circuit to stabilize itself. This was made for all the 29
capacitors.

![voltage_fluctoscospy](voltage_fluctoscopy_setup.jpg)

![voltage_fluctoscospy_zoom](voltage_fluctoscopy_setup_zoomed.jpg)

## Stop messing around, can it actually measure Boltzmann?

Yes! I could in fact measure the Boltzmann constant within the error
margin!

![boltzmann determination plot]()

## Future work

Finish designing the voltage sources for performing the experiments using
a 1.5V cell (characterization of the analog multiplier) and two 9 Volts
batteries (symmetric voltage source - board power). Also including 3D
printed cases.

Finish designing the wooden support I idealized for the board.

Improve the simulation to be able to easily modify and maybe reduce the
manufacturing costs.

Improve the project's github repo documentation.

In the future I'll really enjoy having like integrated mechanical and
electrical design (integrate KiCAD and FreeCAD), maybe this is a good
topic for another future post. Together with a post about the actual
research project for what I work on about landing quad-rotors on
oscillating platforms...

## Final things and special thanks

Thank my friend Júlio Calandrin for the support, layout consultancy,
soldering classes and patience. Thanks Dr. Prof. João Navarro Soares
Júnior for the help understanding the phenomena and some insights about
noise simulation. Thanks Dr. Prof. José Marcos Alves, professor in charge
of the lab, and the whole Electrical Engineer Department of the São Carlos
School of Engineering - University of São Paulo ( SEL EESC-USP ) for the
LA-SEL infrastructure, sure soldering the board and performing the
experiments would be a lot harder than it was.

And of course, thanks my friend Me. Edney Melo for the idea of following
this project.

Cite [paper at IOP](https://iopscience.iop.org/article/10.1088/1361-6404/ab07e0)

Writing this post I found a paper from the same authors that basically
powers up the experiment (I'll definitely check out). I'll try to contact
the original authors, specially Dr. Todor M. Mishonov, maybe they will be
excited about the project too, who knows.
